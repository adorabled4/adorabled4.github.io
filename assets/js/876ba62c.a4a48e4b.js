"use strict";(self.webpackChunkturbo_api=self.webpackChunkturbo_api||[]).push([[2955],{2986:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var t=r(5893),s=r(1151);const i={sidebar_position:1},a="\ud83e\udd51 AK/SK\u52a0\u5bc6\u8bf4\u660e",c={id:"\u52a0\u5bc6\u7b97\u6cd5\u8bf4\u660e",title:"\ud83e\udd51 AK/SK\u52a0\u5bc6\u8bf4\u660e",description:"\u5728\u901a\u8fc7email\u8ba4\u8bc1\u5e76\u4e14\u6210\u529f\u7533\u8bf7AK/SK\u4e4b\u540e, \u60a8\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95eehttp://turboapi.dhx.icu/\u6765\u8c03\u7528\u63a5\u53e3\u670d\u52a1\u3002",source:"@site/docs/\u52a0\u5bc6\u7b97\u6cd5\u8bf4\u660e.md",sourceDirName:".",slug:"/\u52a0\u5bc6\u7b97\u6cd5\u8bf4\u660e",permalink:"/docs/\u52a0\u5bc6\u7b97\u6cd5\u8bf4\u660e",draft:!1,unlisted:!1,editUrl:"https://github.com/adorabled4/TurboAPI/tree/dev/api-doc/docs/\u52a0\u5bc6\u7b97\u6cd5\u8bf4\u660e.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u270d \u5f00\u53d1\u6307\u5357",permalink:"/docs/intro"},next:{title:"\u26bd \u63a5\u53e3-v1",permalink:"/docs/category/-\u63a5\u53e3-v1"}},d={},l=[{value:"\u52a0\u5bc6\u7b97\u6cd5",id:"\u52a0\u5bc6\u7b97\u6cd5",level:2},{value:"Java\u7248\u672c\ud83e\udd50",id:"java\u7248\u672c",level:3},{value:"Python \u7248\u672c\ud83e\udd68",id:"python-\u7248\u672c",level:3},{value:"Golang \u7248\u672c\ud83e\udd6b",id:"golang-\u7248\u672c",level:3},{value:"JavaScript \u7248\u672c\ud83e\uddc2",id:"javascript-\u7248\u672c",level:3},{value:"\u9274\u6743\u5931\u8d25\u8bf4\u660e",id:"\u9274\u6743\u5931\u8d25\u8bf4\u660e",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"-aksk\u52a0\u5bc6\u8bf4\u660e",children:"\ud83e\udd51 AK/SK\u52a0\u5bc6\u8bf4\u660e"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u901a\u8fc7",(0,t.jsx)(n.strong,{children:"email"}),"\u8ba4\u8bc1\u5e76\u4e14\u6210\u529f\u7533\u8bf7AK/SK\u4e4b\u540e, \u60a8\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee",(0,t.jsx)(n.code,{children:"http://turboapi.dhx.icu/"}),"\u6765\u8c03\u7528\u63a5\u53e3\u670d\u52a1\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u52a0\u5bc6\u7b97\u6cd5",children:"\u52a0\u5bc6\u7b97\u6cd5"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u8bbf\u95ee\u63a7\u5236\uff1aAccessKey\uff08\u8bbf\u95ee\u5bc6\u94a5\uff09\u548cSecretKey\uff08\u79d8\u94a5\uff09\u662f\u7528\u4e8e\u8bbf\u95ee\u8fdc\u7a0bAPI\u7684\u8eab\u4efd\u9a8c\u8bc1\u51ed\u8bc1\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u968f\u673a\u6570\uff08Nonce\uff09\uff1a\u968f\u673a\u6570\u7528\u4e8e\u6bcf\u4e2a\u8bf7\u6c42\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\uff0c\u4ee5\u786e\u4fdd\u6bcf\u6b21\u8bf7\u6c42\u7684\u7b7e\u540d\u90fd\u662f\u4e0d\u540c\u7684\u3002\u8fd9\u6709\u52a9\u4e8e\u9632\u6b62\u91cd\u653e\u653b\u51fb\uff0c\u5373\u653b\u51fb\u8005\u5c1d\u8bd5\u91cd\u590d\u53d1\u9001\u5df2\u7ecf\u6355\u83b7\u7684\u8bf7\u6c42\u6216\u4f2a\u9020\u8bf7\u6c42\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u65f6\u95f4\u6233\uff08Timestamp\uff09\uff1a\u65f6\u95f4\u6233\u7528\u4e8e\u6807\u8bb0\u8bf7\u6c42\u53d1\u8d77\u7684\u65f6\u95f4\uff0c\u8c03\u7528\u670d\u52a1\u7aef\u7684\u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u65f6\u95f4\u6233\u6765\u9a8c\u8bc1\u6b64\u8bf7\u6c42\u662f\u5426\u5728\u6709\u6548\u65f6\u95f4\u5185\u53d1\u8d77\u3002\u53ef\u9632\u6b62\u91cd\u653e\u653b\u51fb\u548c\u65f6\u5e8f\u653b\u51fb\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u751f\u6210\u7b7e\u540d\uff1a\u5c06\u8bf7\u6c42\u4f53\u5185\u5bb9\u4e0eSecretKey\u8fde\u63a5\uff0c\u7136\u540e\u5bf9\u8fde\u63a5\u540e\u7684\u5185\u5bb9\u8fdb\u884cSHA256\u52a0\u5bc6\uff0c\u5e76\u4ee5\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e0d\u540c\u7248\u672c\u7684\u52a0\u5bc6\u7b97\u6cd5\u5b9e\u73b0\u793a\u4f8b:"}),"\n",(0,t.jsx)(n.h3,{id:"java\u7248\u672c",children:"Java\u7248\u672c\ud83e\udd50"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'\r\npublic class Demo {\r\n\r\n    private String accessKey = "YOUR ACCESS KEY";\r\n    private String secretKey = "YOUR SECRET KEY";\r\n\r\n    private void call() {\r\n        String result = HttpRequest\r\n                .get("http://turboapi.dhx.icu/api/v1/common/poet/random")\r\n                .addHeaders(getHeaderMap())\r\n                .execute().body();\r\n    }\r\n\r\n    private Map<String, String> getHeaderMap() {\r\n        Map<String, String> hashMap = new HashMap<>();\r\n        hashMap.put("accessKey", accessKey);\r\n        hashMap.put("nonce", RandomUtil.randomNumbers(6));\r\n        hashMap.put("timestamp", String.valueOf(System.currentTimeMillis() / 1000));\r\n        hashMap.put("sign", genSign("", secretKey));\r\n        return hashMap;\r\n    }\r\n\r\n    private String genSign(String body, String secretKey) {\r\n        Digester md5 = new Digester(DigestAlgorithm.SHA256);\r\n        String content = body + "." + secretKey;\r\n        return md5.digestHex(content);\r\n    }\r\n\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"python-\u7248\u672c",children:"Python \u7248\u672c\ud83e\udd68"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\r\n\r\nimport requests\r\nimport time\r\nimport hashlib\r\nimport random\r\nfrom typing import Dict\r\n\r\nclass Demo:\r\n    def __init__(self, access_key, secret_key):\r\n        self.access_key = access_key\r\n        self.secret_key = secret_key\r\n\r\n\r\n        def call(self):\r\n            headers = self._get_header_map()\r\n            response = requests.get("http://turboapi.dhx.icu/api/v1/common/poet/random", headers=headers)\r\n            result = response.text\r\n            return result\r\n\r\n\r\n        def _get_header_map(self) -> Dict[str, str]:\r\n            header_map = {}\r\n            header_map["accessKey"] = self.access_key\r\n            header_map["nonce"] = \'\'.join(random.choices(\'0123456789\', k=6))\r\n            header_map["timestamp"] = str(int(time.time()))\r\n            header_map["sign"] = self._gen_sign("", self.secret_key)\r\n            return header_map\r\n\r\n\r\n        def _gen_sign(self, body, secret_key):\r\n            content = body + "." + secret_key\r\n            return hashlib.sha256(content.encode(\'utf-8\')).hexdigest()\r\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"golang-\u7248\u672c",children:"Golang \u7248\u672c\ud83e\udd6b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Go",children:'\r\npackage main\r\n\r\nimport (\r\n    "fmt"\r\n    "math/rand"\r\n    "net/http"\r\n    "strconv"\r\n    "time"\r\n)\r\n\r\ntype Demo struct {\r\n    AccessKey string\r\n    SecretKey string\r\n}\r\n\r\nfunc (d Demo) Call() string {\r\n    headers := d.getHeaderMap()\r\n    resp, _ := http.Get("http://turboapi.dhx.icu/api/v1/common/poet/random")\r\n    defer resp.Body.Close()\r\n    body, _ := io.ReadAll(resp.Body)\r\n    return string(body)\r\n}\r\n\r\nfunc (d Demo) getHeaderMap() map[string]string {\r\n    headerMap := make(map[string]string)\r\n    headerMap["accessKey"] = d.AccessKey\r\n    headerMap["nonce"] = strconv.Itoa(rand.Intn(1000000))\r\n    headerMap["timestamp"] = strconv.Itoa(int32(time.Now().Unix()))\r\n    headerMap["sign"] = genSign("", d.SecretKey)\r\n    return headerMap\r\n}\r\n\r\nfunc genSign(body, secretKey string) string {\r\n    content := body + "." + secretKey\r\n    h := sha256.New()\r\n    h.Write([]byte(content))\r\n    return hex.EncodeToString(h.Sum(nil))\r\n}\r\n\r\n\r\n\r\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"javascript-\u7248\u672c",children:"JavaScript \u7248\u672c\ud83e\uddc2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'\r\nconst fetch = require(\'node-fetch\');\r\nconst crypto = require(\'crypto\');\r\n\r\nclass Demo {\r\n    constructor(accessKey, secretKey) {\r\n        this.accessKey = accessKey;\r\n        this.secretKey = secretKey;\r\n    }\r\n\r\n    async call() {\r\n        const headers = this.getHeaderMap();\r\n        const response = await fetch(\'http://turboapi.dhx.icu/api/v1/common/poet/random\', {headers});\r\n        const result = await response.text();\r\n        return result;\r\n    }\r\n\r\n    getHeaderMap() {\r\n        const headerMap = {};\r\n        headerMap["accessKey"] = this.accessKey;\r\n        headerMap["nonce"] = Math.floor(100000 + Math.random() * 900000);\r\n        headerMap["timestamp"] = Math.floor(Date.now() / 1000);\r\n        headerMap["sign"] = this.genSign("", this.secretKey);\r\n        return headerMap;\r\n    }\r\n\r\n    genSign(body, secretKey) {\r\n        const content = body + "." + secretKey;\r\n        const hash = crypto.createHash(\'sha256\');\r\n        hash.update(content);\r\n        return hash.digest(\'hex\');\r\n    }\r\n}\r\n\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u9274\u6743\u5931\u8d25\u8bf4\u660e",children:"\u9274\u6743\u5931\u8d25\u8bf4\u660e"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u9274\u6743\u5931\u8d25\uff0c\u5219\u6839\u636e\u4e0d\u540c\u9519\u8bef\u7c7b\u578b\u8fd4\u56de\u4e0d\u540ccode\u72b6\u6001\u7801\uff0c\u540c\u65f6\u643a\u5e26\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f\uff0c\u8be6\u7ec6\u9519\u8bef\u8bf4\u660e\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"HTTP Code"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u89e3\u51b3\u65b9\u6cd5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"401"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7f3a\u5c11\u53c2\u6570"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:'{"message":"Unauthorized"}'})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["\u68c0\u67e5\u662f\u5426\u5728\u8bf7\u6c42\u4e2d\u6dfb\u52a0\u4e86key\u4fe1\u606f, \u5177\u4f53\u53c2\u8003\u4e0a\u9762\u7684",(0,t.jsx)(n.strong,{children:"\u7b97\u6cd5\u8bf4\u660e"}),"\u4ee5\u53ca",(0,t.jsx)(n.strong,{children:"\u793a\u4f8b\u4ee3\u7801"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"401"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7b7e\u540d\u53c2\u6570\u89e3\u6790\u5931\u8d25"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"{\u201cmessage\u201d:\u201dHMAC signature cannot be verified\u201d}"})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["\u68c0\u67e5\u7b7e\u540d\u7684\u5404\u4e2a\u53c2\u6570\u662f\u5426\u6709\u7f3a\u5931\u662f\u5426\u6b63\u786e\uff0c\u7279\u522b\u786e\u8ba4\u4e0b\u590d\u5236\u7684",(0,t.jsx)(n.strong,{children:"AK/SK"}),"\u662f\u5426\u6b63\u786e"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"401"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7b7e\u540d\u6821\u9a8c\u5931\u8d25"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"{\u201cmessage\u201d:\u201dHMAC signature does not match\u201d}"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u7b7e\u540d\u9a8c\u8bc1\u5931\u8d25\uff0c\u53ef\u80fd\u539f\u56e0\u6709\u5f88\u591a\u3002 1. \u68c0\u67e5access_key,secret_key\u662f\u5426\u6b63\u786e\u3002 2.\u68c0\u67e5\u8ba1\u7b97\u7b7e\u540d\u7684\u53c2\u6570\uff0cnonce , timestamp\u662f\u5426\u6309\u7167\u534f\u8bae\u8981\u6c42\u62fc\u63a5\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"403"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u65f6\u949f\u504f\u79fb\u6821\u9a8c\u5931\u8d25"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"{\u201cmessage\u201d:\u201dHMAC signature cannot be verified, a valid date or x-date header is required for HMAC Authentication\u201d}"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u68c0\u67e5\u670d\u52a1\u5668\u65f6\u95f4\u662f\u5426\u6807\u51c6\uff0c\u76f8\u5dee5\u5206\u949f\u4ee5\u4e0a\u4f1a\u62a5\u6b64\u9519\u8bef"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>a});var t=r(7294);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);